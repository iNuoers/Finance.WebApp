webpackJsonp([11],{0:function(e,t,n){e.exports=n(49)},4:function(e,t,n){"use strict";var o=n(1),s={login:function(e,t,n,s,i){o.request({url:o.config.serverHost,data:e,method:"POST",success:t,error:n,beforeSend:s,complete:i})},checkExistPhone:function(e,t,n){o.request({url:o.config.serverHost,data:{type:"phone",str:e},method:"POST",success:t,error:n})},register:function(e,t,n,s,i){o.request({url:o.config.serverHost,data:e,method:"POST",success:t,error:n,beforeSend:s,complete:i})},checkLogin:function(){!o.storage.getItem("F.token")},resetPassword:function(e,t,n){o.request({url:o.config.serverHost,data:e,method:"POST",success:t,error:n})},getUserInfo:function(e,t){o.request({url:o.config.serverHost,method:"POST",success:e,error:t})},updateUserInfo:function(e,t,n){o.request({url:o.config.serverHost,data:e,method:"POST",success:t,error:n})},updatePassword:function(e,t,n){o.request({url:o.config.serverHost,data:e,method:"POST",success:t,error:n})},logout:function(e,t){o.storage.clearItem("F.token"),o.storage.clearItem("F.phone"),o.storage.clearItem("F.avator"),o.storage.clearItem("f_ui_cache")},getUserInfo:function(){},getvcode:function(e,t,n){o.request({url:o.config.serverHost,data:e,method:"POST",success:t,error:n})}};s.checkLogin(),e.exports=s},7:function(e,t){},49:function(e,t,n){"use strict";n(7);var o=n(1),s=n(4);fjw.webapp.logon={init:function(){this.bindEvent()},bindEvent:function(){function e(){""!=n.val()?n.siblings("span").show():n.siblings("span").hide(),""!=o.val()?o.siblings("span").show():o.siblings("span").hide(),""!=s.val()?s.siblings("span").show():s.siblings("span").hide(),""!=i.val()?i.siblings("span").show():i.siblings("span").hide(),""!=n.val().trim()&&""!=o.val().trim()&&""!=s.val().trim()&&""!=i.val().trim()?r.removeClass("disabled"):r.addClass("disabled")}var t=this,n=$("#phone"),o=$("#txtCode"),s=$("#password"),i=$("#imgCode"),r=$("#logonbtn"),a=$(".app-main");setTimeout(function(){e()},200),a.delegate(".quick-del","click",function(){$(this).siblings("input").val(""),$(this).addClass("f-hide"),r.addClass("disabled")}),n.bind("input",function(){window.setTimeout(function(){e()},0)}),s.bind("input",function(){window.setTimeout(function(){e()},0)}),o.bind("input",function(){window.setTimeout(function(){e()},0)}),i.bind("input",function(){window.setTimeout(function(){e()},0)}),$("#logonbtn").click(function(){$("#logonbtn").hasClass("disabled")||t.submit()}),$(".app-main").keyup(function(e){e.preventDefault(),13===e.keyCode&&t.submit()}),$("#btnGetVCode").click(function(){$.trim($("#phone").val())?t.getVCode():$(".error").html("请填写手机号").removeClass("f-hide")})},getVCode:function(){function e(e){$(".error").html(e).removeClass("f-hide")}var t={Domain:"webapp",DeviceName:"weiguanwang",Phone:$.trim($("#phone").val()),Type:"1"},n={M:"GetVCode",D:JSON.stringify(t)},i=o.validate(t.Phone,"require");i?s.getvcode(JSON.stringify(n),function(e){alert("发送成功")},function(t){e(t)}):e(i.msg)},submit:function(){function e(e){$(".error").html(e).removeClass("f-hide")}var t={Domain:"webapp",DeviceName:"weiguanwang",Phone:$.trim($("#phone").val()),VCode:$.trim($("#txtCode").val()),Pswd:$.trim($("#password").val()),Channel:"weiguanwang",FriendPhone:$.trim($("#password").val())},n={M:"Regist",D:JSON.stringify(t)},i=this.formValidate(t);i.status&&!$("#logonbtn").hasClass("disabled")?s.register(JSON.stringify(n),function(e){var t=JSON.parse(e);o.storage.setItem("F.token",t.token,{path:"/"}),o.storage.setItem("F.phone",t.member.phone,{path:"/"}),o.storage.setItem("F.avator",t.member.headPhoto,{path:"/"}),o.storage.setItem("f_ui_cache",e),window.location.href=o.Tools.getUrlParam("redirect")||"/dist/view/my/index.html"},function(t){e(t)},function(){$(".error").html("").addClass("f-hide"),$("#logonbtn i").removeClass("f-hide"),$("#logonbtn span").text("注册中..."),$("#logonbtn").addClass("disabled")},function(){$("#logonbtn i").addClass("f-hide"),$("#logonbtn span").text("立即注册"),$("#logonbtn").removeClass("disabled")}):e(i.msg)},formValidate:function(e){var t={status:!1,msg:""},n={phone:"手机号码不能为空",password:"密码不能为空",pictureCode:"请输入图形验证码"};return o.validate(e.Phone,"require")?o.validate(e.Pswd,"require")?(t.status=!0,t.msg="验证通过",t):(t.msg=n.password,t):(t.msg=n.phone,t)}},$(function(){fjw.webapp.logon.init()})}});