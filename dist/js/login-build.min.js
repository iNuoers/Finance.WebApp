webpackJsonp([12],{0:function(e,t,s){e.exports=s(48)},4:function(e,t,s){"use strict";var n=s(1),o={login:function(e,t,s,o,i){n.request({url:n.config.serverHost,data:e,method:"POST",success:t,error:s,beforeSend:o,complete:i})},checkExistPhone:function(e,t,s){n.request({url:n.config.serverHost,data:{type:"phone",str:e},method:"POST",success:t,error:s})},register:function(e,t,s,o,i){n.request({url:n.config.serverHost,data:e,method:"POST",success:t,error:s,beforeSend:o,complete:i})},checkLogin:function(){!n.storage.getItem("F.token")},resetPassword:function(e,t,s){n.request({url:n.config.serverHost,data:e,method:"POST",success:t,error:s})},getUserInfo:function(e,t){n.request({url:n.config.serverHost,method:"POST",success:e,error:t})},updateUserInfo:function(e,t,s){n.request({url:n.config.serverHost,data:e,method:"POST",success:t,error:s})},updatePassword:function(e,t,s){n.request({url:n.config.serverHost,data:e,method:"POST",success:t,error:s})},logout:function(e,t){n.storage.clearItem("F.token"),n.storage.clearItem("F.phone"),n.storage.clearItem("F.avator"),n.storage.clearItem("f_ui_cache")},getUserInfo:function(){},getvcode:function(e,t,s){n.request({url:n.config.serverHost,data:e,method:"POST",success:t,error:s})}};o.checkLogin(),e.exports=o},7:function(e,t){},48:function(e,t,s){"use strict";s(7);var n=s(1),o=s(4);fjw.webapp.login={init:function(){this.bindEvent()},bindEvent:function(){function e(){""!=s.val()?s.siblings("span").show():s.siblings("span").hide(),""!=n.val()?n.siblings("span").show():n.siblings("span").hide(),""!=s.val().trim()&&""!=n.val().trim()?o.removeClass("disabled"):o.addClass("disabled")}var t=this,s=$("#phone"),n=$("#password"),o=$("#loginbtn"),i=$(".app-main");setTimeout(function(){e()},200),i.delegate(".quick-del","click",function(){$(this).siblings("input").val(""),$(this).addClass("f-hide"),o.addClass("disabled")}),s.bind("input",function(){window.setTimeout(function(){e()},0)}),n.bind("input",function(){window.setTimeout(function(){e()},0)}),$("#loginbtn").click(function(){$("#loginbtn").hasClass("disabled")||t.submit()}),$(".app-main").keyup(function(e){e.preventDefault(),13===e.keyCode&&t.submit()})},submit:function(){function e(e){$(".error").html(e).removeClass("f-hide")}var t={Domain:"webapp",DeviceName:"",DeviceName:"",Phone:$.trim($("#phone").val()),Pswd:$.trim($("#password").val())},s={M:"Login",D:JSON.stringify(t)},i=this.formValidate(t);i.status&&!$("#loginbtn").hasClass("disabled")?o.login(JSON.stringify(s),function(e){var t=JSON.parse(e);n.storage.setItem("F.token",t.token,{path:"/"}),n.storage.setItem("F.phone",t.member.phone,{path:"/"}),n.storage.setItem("F.avator",t.member.headPhoto,{path:"/"}),n.storage.setItem("f_ui_cache",e),window.location.href=n.Tools.getUrlParam("redirect")||"/dist/view/my/index.html"},function(t){e(t)},function(){$(".error").html("").addClass("f-hide"),$("#loginbtn i").removeClass("f-hide"),$("#loginbtn span").text("登录中..."),$("#loginbtn").addClass("disabled")},function(){$("#loginbtn i").addClass("f-hide"),$("#loginbtn span").text("立即登录"),$("#loginbtn").removeClass("disabled")}):e(i.msg)},formValidate:function(e){var t={status:!1,msg:""},s={phone:"手机号码不能为空",password:"密码不能为空",pictureCode:"请输入图形验证码"};return n.validate(e.Phone,"require")?n.validate(e.Pswd,"require")?(t.status=!0,t.msg="验证通过",t):(t.msg=s.password,t):(t.msg=s.phone,t)}},$(function(){fjw.webapp.login.init()})}});